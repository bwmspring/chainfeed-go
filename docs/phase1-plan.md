# ChainFeed ç¬¬ä¸€æœŸå¼€å‘è®¡åˆ’

## ğŸ“‹ ç‰ˆæœ¬ç›®æ ‡

**ç‰ˆæœ¬å·**: v0.1.0 (MVP - æ—  AI ç‰ˆæœ¬)  
**ç›®æ ‡**: æ„å»ºæ ¸å¿ƒé“¾ä¸Šæ•°æ®ç´¢å¼•ä¸å®æ—¶æ¨é€èƒ½åŠ›ï¼ŒéªŒè¯æŠ€æœ¯æ¶æ„å¯è¡Œæ€§

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½èŒƒå›´

### 1. åœ°å€ç›‘æ§ç®¡ç†
- ç”¨æˆ·å¯æ·»åŠ /åˆ é™¤ç›‘æ§åœ°å€
- æ”¯æŒ ENS åŸŸåè§£æä¸ºåœ°å€
- åœ°å€æ ‡ç­¾ä¸å¤‡æ³¨åŠŸèƒ½
- ç›‘æ§åœ°å€åˆ—è¡¨çš„å¢åˆ æ”¹æŸ¥

### 2. é“¾ä¸Šæ•°æ®ç´¢å¼•
- **æ”¯æŒé“¾**: Ethereum Mainnet (å•é“¾)
- **æ”¯æŒäº¤æ˜“ç±»å‹**:
  - ETH åŸç”Ÿè½¬è´¦
  - ERC-20 ä»£å¸è½¬è´¦
  - ERC-721 NFT è½¬è´¦/é“¸é€ 
- æ•°æ®æº: Alchemy Webhooks æˆ– Moralis Streams
- äº¤æ˜“æ•°æ®æŒä¹…åŒ–å­˜å‚¨

### 3. å®æ—¶ Feed æµ
- WebSocket å®æ—¶æ¨é€æ–°äº¤æ˜“
- Feed æµæŒ‰æ—¶é—´å€’åºå±•ç¤º
- åŸºç¡€äº¤æ˜“ä¿¡æ¯å±•ç¤º:
  - å‘é€æ–¹/æ¥æ”¶æ–¹åœ°å€
  - äº¤æ˜“é‡‘é¢/ä»£å¸ä¿¡æ¯
  - äº¤æ˜“å“ˆå¸Œä¸åŒºå—é«˜åº¦
  - äº¤æ˜“æ—¶é—´æˆ³
- æ”¯æŒåˆ†é¡µåŠ è½½å†å²è®°å½•

### 4. å‰ç«¯ç•Œé¢
- å“åº”å¼ Feed UI
- åœ°å€ç›‘æ§ç®¡ç†é¡µé¢
- äº¤æ˜“è¯¦æƒ…æŸ¥çœ‹
- åŸºç¡€ç­›é€‰åŠŸèƒ½ (æŒ‰åœ°å€/äº¤æ˜“ç±»å‹)

## ğŸš« æ˜ç¡®æ’é™¤çš„åŠŸèƒ½

- âŒ AI äº¤æ˜“æ‘˜è¦ä¸è§£æ
- âŒ å¤æ‚åˆçº¦äº¤äº’è§£æ
- âŒ å¤šé“¾æ”¯æŒ (ä»… Ethereum)
- âŒ å¼‚å¸¸è¡Œä¸ºç›‘æµ‹
- âŒ é“¾ä¸Šå…³ç³»å›¾è°±
- âŒ æ•°æ®å¯¼å‡º API

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
```
- è¯­è¨€: Go 1.22+
- Web æ¡†æ¶: Gin
- æ•°æ®åº“: PostgreSQL 15+
- ç¼“å­˜: Redis 7+
- åŒºå—é“¾äº¤äº’: go-ethereum (ethclient)
- WebSocket: gorilla/websocket
```

### å‰ç«¯æŠ€æœ¯æ ˆ
```
- æ¡†æ¶: Next.js 14 (App Router)
- æ ·å¼: TailwindCSS
- çŠ¶æ€ç®¡ç†: Zustand
- WebSocket å®¢æˆ·ç«¯: native WebSocket API
```

### æ•°æ®æº
```
- Alchemy Notify (Webhooks)
  æˆ–
- Moralis Streams API
```

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

#### users (ç”¨æˆ·è¡¨)
```sql
- id: bigserial
- wallet_address: varchar(42) UNIQUE
- nonce: varchar(64)
- created_at: timestamp
- updated_at: timestamp
```

#### watched_addresses (ç›‘æ§åœ°å€è¡¨)
```sql
- id: bigserial
- user_id: bigint (FK)
- address: varchar(42)
- label: varchar(100)
- ens_name: varchar(255)
- created_at: timestamp
```

#### transactions (äº¤æ˜“è®°å½•è¡¨)
```sql
- id: bigserial
- tx_hash: varchar(66) UNIQUE
- block_number: bigint
- block_timestamp: timestamp
- from_address: varchar(42)
- to_address: varchar(42)
- value: numeric(78, 0)
- tx_type: varchar(20) -- 'ETH', 'ERC20', 'ERC721'
- token_address: varchar(42)
- token_id: varchar(78)
- token_symbol: varchar(20)
- token_decimals: int
- created_at: timestamp
```

#### feed_items (Feed æµè¡¨)
```sql
- id: bigserial
- user_id: bigint (FK)
- transaction_id: bigint (FK)
- watched_address_id: bigint (FK)
- created_at: timestamp
```

## ğŸ”„ æ ¸å¿ƒæ•°æ®æµ

```
1. Webhook æ¥æ”¶
   â†“
2. äº¤æ˜“æ•°æ®è§£æä¸éªŒè¯
   â†“
3. æ•°æ®åº“æŒä¹…åŒ– (transactions è¡¨)
   â†“
4. åŒ¹é…ç”¨æˆ·ç›‘æ§åœ°å€
   â†“
5. ç”Ÿæˆ Feed æ¡ç›® (feed_items è¡¨)
   â†“
6. Redis Pub/Sub å‘å¸ƒäº‹ä»¶
   â†“
7. WebSocket æ¨é€ç»™åœ¨çº¿ç”¨æˆ·
```

## ğŸ“ å¼€å‘ä»»åŠ¡æ‹†è§£

### Phase 1.1: åŸºç¡€è®¾æ–½æ­å»º (Week 1-2)
- [ ] é¡¹ç›®è„šæ‰‹æ¶åˆå§‹åŒ–
- [ ] æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡ä¸è¿ç§»è„šæœ¬
- [ ] Redis è¿æ¥ä¸ Pub/Sub å°è£…
- [ ] åŸºç¡€ API è·¯ç”±æ¡†æ¶
- [ ] é…ç½®ç®¡ç† (ç¯å¢ƒå˜é‡/é…ç½®æ–‡ä»¶)

### Phase 1.2: æ•°æ®ç´¢å¼•å±‚ (Week 3-4)
- [ ] Webhook æ¥æ”¶ç«¯ç‚¹å®ç°
- [ ] äº¤æ˜“æ•°æ®è§£æå™¨ (ETH/ERC-20/ERC-721)
- [ ] æ•°æ®åº“ DAO å±‚å®ç°
- [ ] å¹‚ç­‰æ€§å¤„ç† (é˜²æ­¢é‡å¤å…¥åº“)
- [ ] Alchemy/Moralis Webhook é…ç½®

### Phase 1.3: ç”¨æˆ·ä¸ç›‘æ§ç®¡ç† (Week 5)
- [ ] Web3 é’±åŒ…è¿æ¥ API (MetaMask/WalletConnect)
- [ ] é’±åŒ…ç­¾åéªŒè¯ä¸ nonce ç®¡ç†
- [ ] ç›‘æ§åœ°å€ CRUD API
- [ ] ENS è§£æé›†æˆ
- [ ] åœ°å€æœ‰æ•ˆæ€§æ ¡éªŒ

### Phase 1.4: Feed æµä¸ WebSocket (Week 6-7)
- [ ] Feed æµæŸ¥è¯¢ API (åˆ†é¡µ/ç­›é€‰)
- [ ] WebSocket æœåŠ¡å®ç°
- [ ] è¿æ¥ç®¡ç†ä¸å¿ƒè·³æœºåˆ¶
- [ ] Redis Pub/Sub è®¢é˜…ä¸æ¨é€
- [ ] ç”¨æˆ·çº§åˆ«çš„æ¶ˆæ¯è·¯ç”±

### Phase 1.5: å‰ç«¯å¼€å‘ (Week 8-10)
- [ ] é¡¹ç›®åˆå§‹åŒ–ä¸è·¯ç”±é…ç½®
- [ ] ç™»å½•/æ³¨å†Œé¡µé¢
- [ ] ç›‘æ§åœ°å€ç®¡ç†é¡µé¢
- [ ] Feed æµå±•ç¤ºç»„ä»¶
- [ ] WebSocket å®¢æˆ·ç«¯é›†æˆ
- [ ] äº¤æ˜“è¯¦æƒ…å¼¹çª—
- [ ] å“åº”å¼å¸ƒå±€é€‚é…

### Phase 1.6: æµ‹è¯•ä¸ä¼˜åŒ– (Week 11-12)
- [ ] å•å…ƒæµ‹è¯• (æ ¸å¿ƒè§£æé€»è¾‘)
- [ ] é›†æˆæµ‹è¯• (API ç«¯åˆ°ç«¯)
- [ ] å‹åŠ›æµ‹è¯• (WebSocket å¹¶å‘)
- [ ] æ€§èƒ½ä¼˜åŒ– (æ•°æ®åº“ç´¢å¼•/æŸ¥è¯¢ä¼˜åŒ–)
- [ ] é”™è¯¯å¤„ç†ä¸æ—¥å¿—å®Œå–„
- [ ] éƒ¨ç½²æ–‡æ¡£ç¼–å†™

## ğŸ¯ éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- âœ… ç”¨æˆ·å¯æˆåŠŸæ·»åŠ è‡³å°‘ 5 ä¸ªç›‘æ§åœ°å€
- âœ… ç›‘æ§åœ°å€å‘ç”Ÿçš„ ETH/ERC-20/ERC-721 äº¤æ˜“èƒ½åœ¨ 10 ç§’å†…å‡ºç°åœ¨ Feed æµ
- âœ… WebSocket è¿æ¥ç¨³å®šï¼Œæ”¯æŒæ–­çº¿é‡è¿
- âœ… Feed æµæ”¯æŒåŠ è½½è‡³å°‘ 100 æ¡å†å²è®°å½•
- âœ… å‰ç«¯ç•Œé¢åœ¨ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯å‡å¯æ­£å¸¸ä½¿ç”¨

### æ€§èƒ½éªŒæ”¶
- âœ… Webhook æ¥å£å“åº”æ—¶é—´ < 200ms (P95)
- âœ… Feed æŸ¥è¯¢ API å“åº”æ—¶é—´ < 500ms (P95)
- âœ… å•æœåŠ¡å™¨æ”¯æŒè‡³å°‘ 100 ä¸ªå¹¶å‘ WebSocket è¿æ¥
- âœ… æ•°æ®åº“æŸ¥è¯¢ä½¿ç”¨ç´¢å¼•ï¼Œæ— å…¨è¡¨æ‰«æ

### ä»£ç è´¨é‡
- âœ… æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 60%
- âœ… ä»£ç é€šè¿‡ golangci-lint æ£€æŸ¥
- âœ… API æ¥å£æœ‰å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… æ•æ„Ÿä¿¡æ¯ä¸ç¡¬ç¼–ç åœ¨ä»£ç ä¸­

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### å¼€å‘ç¯å¢ƒ
- Docker Compose ä¸€é”®å¯åŠ¨ (Postgres + Redis + Backend + Frontend)

### ç”Ÿäº§ç¯å¢ƒ (å¯é€‰)
- åç«¯: AWS ECS / Railway / Fly.io
- æ•°æ®åº“: AWS RDS / Supabase
- ç¼“å­˜: AWS ElastiCache / Upstash Redis
- å‰ç«¯: Vercel / Netlify

## ğŸ“ˆ åç»­è¿­ä»£æ–¹å‘ (Phase 2)

åœ¨ç¬¬ä¸€æœŸéªŒè¯æˆåŠŸåï¼Œå¯è€ƒè™‘:
- å¤šé“¾æ”¯æŒ (Arbitrum, Base, Polygon)
- ç®€å•çš„äº¤æ˜“åˆ†ç±»æ ‡ç­¾ (Swap, Mint, Transfer)
- äº¤æ˜“é‡‘é¢çš„ USD ä»·å€¼æ˜¾ç¤º
- æ›´ä¸°å¯Œçš„ç­›é€‰ä¸æœç´¢åŠŸèƒ½
- ç§»åŠ¨ç«¯ PWA æ”¯æŒ

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2026-02-04  
**è´Ÿè´£äºº**: @songruobing
